<html lang="en"><head>
	<meta charset="UTF-8">
	<title>注册</title>
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/base.css">
	<link rel="stylesheet" href="../css/zhezhao.css">
	<script src="//hm.baidu.com/hm.js?77c5dde47c1fe4408e43b5dc5a5d3a0e"></script>
	<script src="../js/zepto.min.js"></script>
<!-- 	<script src = "../javascript/zhezhao.js"></script> -->
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,initial-scale=1.0">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta content="telephone=no" name="format-detection">
</head>
<body onload="startExcute()">
	<div> 
		<section class="login_bt">
			<div class="divoi">
				<p>我们已发送短信验证码至151****1672，请在输入框内填写验证码，若未收到请耐心等候~</p>
			</div>
			
			<form id="form" action="/weixin/registerLogin/registerPasswordPost.do" method="post">
				<div class="divoi_odi">
					<div class="login_td" id="login_dt">
						<input type="number" placeholder="请输入验证码" id="captcha" onkeydown="return handleEnter(this, event)">
						<input style="display:none">
						<input type="hidden" value="15158321672" id="phoneNumber" name="phoneNumber">
					</div>
					<div class="login_od" id="login_do">
						<a href="#" id="getCaptcha" style="display:block" disabled="true">67秒后重新发送</a>
					</div>
					
				</div>
				
				<div class="divoi_odi" style="display:none">
					<div class="login_td" id="login_dt">
						<input type="text" placeholder="请输人图片中的文字" id="captcha2" onkeydown="return handleEnter(this, event)">
					</div>
					<div class="login_od" id="login_do">
						<img alt="看不清楚，换一张" onclick="reloadVertifyCode(this)">
					</div>
					
				</div>
				
				
				<aside class="aisde">
					<div>
						<div class="aisde_od">
							<input type="password" placeholder="请设置密码" id="val" name="password" onkeypress="return handleEnter(this, event)">
						</div>
					</div>
					<div>
						<div class="aisde_od">
							<input type="password" placeholder="请重复密码" id="vlu" name="passwordCheck" onkeydown="return handleEnter(this, event)">
						</div>
					</div>
				</aside>
				<div class="asied">
					<div class="aisde_odi">
						<input type="text" placeholder="请输入邀请码" id="inviteCode" name="inviteCode" onkeypress="if(event.keyCode==13){checkCaptcha();}">
					</div>
				</div>
			
			<aside class="aised_w" id="dio">
				<div class="aised_w_od" id="p_1">
					<p>怎么获得邀请码？</p>
				</div>
				<div class="aised_w_td">
					<img src="../img/icon-up1.png" alt="" id="img_1">
				</div>
			</aside>
			<div class="div"></div>
			<aside class="aised_dis" style="display: block;">
				<ul>
					<li>· 向悟空特权用户索要</li>
					<li>· 到网上搜搜，碰碰运气~</li>
					<li>· 悟空邀请码是每个老用户手机后6位、后8位、后11位</li>
				</ul>
				<p>*成为邀请特权用户可以获得额外收益哟~</p>
			</aside>
			<div class="odi"></div>
			<aside>
				<input type="button" value="注册" id="regButton" class="login_btn" onclick="checkCaptcha()">
			</aside>	
		   </form>
		</section>
	</div>
	
	<section class="zhezhao" id="zhezhao"></section>
	<aside class="showDiv" id="showDiv">
		<div class="zhe" id="zhe">
			<h1>提示</h1>
			<p>您输入的短信验证码有误，请重新输入</p>
			<span id="bto">确定</span>
		</div>
	</aside>
	
	<section class="zhezhao" id="zhezhao2"></section>
	<aside class="showDiv" id="showDiv2">
		<div class="zhe" id="zhe2">
			<h1>提示</h1>
			<p>短信验证码超时，请重新发送验证码</p>
			<span id="bto2">确定</span>
		</div>
	</aside>
	
	
	<section class="zhezhao" id="zhezhao3"></section>
	<aside class="showDiv" id="showDiv3">
		<div class="zhe" id="zhe3">
			<h1>提示</h1>
			<p>密码格式不正确，请输入6-16个英文字母、数字组合</p>
			<span id="bto3">确定</span>
		</div>
	</aside>
	
    <section class="zhezhao" id="zhezhao4"></section>
	<aside class="showDiv" id="showDiv4">
		<div class="zhe" id="zhe4">
			<h1>提示</h1>
			<p>两次输入的密码不相同，请重新输入</p>
			<span id="bto4">确定</span>
		</div>
	</aside>
	
	<section class="zhezhao" id="zhezhao5"></section>
	<aside class="showDiv" id="showDiv5">
		<div class="zhe" id="zhe5">
			<h1>提示</h1>
			<p>请同意《用户协议》</p>
			<span id="bto5">确定</span>
		</div>
	</aside>
	
	
    <section class="zhezhao" id="zhezhao6"></section>
	<aside class="showDiv" id="showDiv6">
		<div class="zhe" id="zhe6">
			<h1>提示</h1>
			<p>您输入的邀请码有误，请重新输入</p>
			<span id="bto6">确定</span>
		</div>
	</aside>
	
	<section class="zhezhao" id="zhezhao7"></section>
	<aside class="showDiv" id="showDiv7">
		<div class="zhe" id="zhe7">
			<h1>提示</h1>
			<p>请输入邀请码</p>
			<span id="bto7">确定</span>
		</div>
	</aside>
	
	
	<section class="zhezhao" id="zhezhao8"></section>
	<aside class="showDiv" id="showDiv8">
		<div class="zhe" id="zhe8">
			<h1>提示</h1>
			<p>您输入的图形验证码有误，请重新输入</p>
			<span id="bto8">确定</span>
		</div>
	</aside>
	
		<section class="zhezhao" id="zhezhao9"></section>
	<aside class="showDiv" id="showDiv9">
		<div class="zhe" id="zhe9">
			<h1>提示</h1>
			<p>对不起，此VIP邀请码已经被使用！</p>
			<span id="bto9">确定</span>
		</div>
	</aside>
	
	 <div id="zhezho" class="zhezh">
		<div id="zh" class="zhc">
		<div>
			<img src="../img/opdui.png" alt="">
		</div>
		<div>
			<p>注册成功</p>
		</div>
		</div>
	</div>
	
	
	<script>
		var oVal = document.getElementById('captcha');
		
		var bto = document.getElementById('bto');
		var bto2 = document.getElementById('bto2');
		var bto3 = document.getElementById('bto3');
		var bto4 = document.getElementById('bto4');
		var bto5 = document.getElementById('bto5');
		var bto6 = document.getElementById('bto6');
		var bto7 = document.getElementById('bto7');
		var bto8 = document.getElementById('bto8');
		var bto9 = document.getElementById('bto9');
		
		var getCaptcha = document.getElementById('getCaptcha');
		var phoneNumber = document.getElementById("phoneNumber");
		
	    var form = document.getElementById("form");
	    var di = document.getElementById('di');
	    var login_do = document.getElementById('login_do');
	    $('.aised_w').on('click',function (){
	    	$('.aised_dis').toggle();
	    });
	    
	    
	    function reloadVertifyCode(obj){
	    	obj.src = "/servlet/ImageServlet.do?d=" + new Date();  
	    }
	    
	    
	    function checkPassword( obj ){
		var reg = /^[0-9a-zA-Z]{6,16}$/;
		var zhezhao = document.getElementById('zhezhao');
		var zhe = document.getElementById('zhe');
		var box = document.getElementById('showDiv');
		var pw=document.getElementById('val').value;
		if( !reg.test(pw)){
			showAlert("zhezhao3","showDiv3","zhe3");
    		return false; 
		}else{
			return true;							
		}
		};
		
	    function handleEnter (field, event) {
			var keyCode = event.keyCode ? event.keyCode : event.which ?
			event.which : event.charCode;
			if (keyCode == 13) {
				var i;
				for (i = 0; i < field.form.elements.length; i++)
				if (field == field.form.elements[i])
				break;
				i = (i + 1) % field.form.elements.length;
				field.form.elements[i].focus();
				return false;
			}
			else
			return true;
		}

		
		var wait=120;
		function timeCaptcha(obj) {
		        if (wait == 0) {
		        	obj.setAttribute("disabled", false);           
		            obj.innerHTML="重新发送";
		            login_do.style.background = "#ff7c8a";
		            login_do.style.boxShadow = "0 5px 0 0 #e9717e";
		            getCaptcha.style.color = "#fff";
		            wait = 120;
		        } else {
		            
		            obj.innerHTML= wait + "秒后重新发送";
		            obj.setAttribute("disabled", true);
		            wait--;
		            setTimeout(function() {
		            	timeCaptcha(obj)
		            },
		            1000);
		            getCaptcha.onclick = null;
		        }
		        if( obj.innerHTML == "重新发送"){
		        	getCaptcha.onclick = function (){
		        		obj.innerHTML= wait + "秒后重新发送";
		        		login_do.style.background = "#dbdbdb";
			            login_do.style.boxShadow = "0 5px 0 0 #cbcbcb";
			            getCaptcha.style.color = "#000";
			            obj.setAttribute("disabled", true);
			            setTimeout(function() {
			            	timeCaptcha(obj)
			            },
			            1000);
			            getCaptcha.onclick = null;
			            reSendCaptcha();
		        	}
		        	
		        }
		    }
		getCaptcha.onclick = function (){
			timeCaptcha(this);
		}
		
		function startExcute(){
			getCaptcha.innerHTML= wait + "秒后重新发送";
			getCaptcha.setAttribute("disabled", true);
            wait--;
            setTimeout(function() {
            	timeCaptcha(getCaptcha)
            },
            1000);
            getCaptcha.onclick = null;
		}
	
		
		bto.onclick = function (){
			hideAlert("zhezhao","showDiv","zhe");
		}
		bto2.onclick = function (){
			hideAlert("zhezhao2","showDiv2","zhe2");
		}
		bto3.onclick = function (){
			hideAlert("zhezhao3","showDiv3","zhe3");
		}
		bto4.onclick = function (){
			hideAlert("zhezhao4","showDiv4","zhe4");
		}
		bto5.onclick = function (){
			hideAlert("zhezhao5","showDiv5","zhe5");
		}
		bto6.onclick = function (){
			hideAlert("zhezhao6","showDiv6","zhe6");
		}
		bto7.onclick = function (){
			hideAlert("zhezhao7","showDiv7","zhe7");
		}
		
		bto8.onclick = function (){
			hideAlert("zhezhao8","showDiv8","zhe8");
		}
		bto9.onclick = function (){
			hideAlert("zhezhao9","showDiv9","zhe9");
		}
		
		//检查验证码是否超时或匹配
		function checkCaptcha() {
						
						if(checkPassword()){
							if( $("#val").val() != $("#vlu").val()){
								showAlert("zhezhao4","showDiv4","zhe4"); //两次密码不一致
							}
							}
		}
		
		//重新发送验证码
		function reSendCaptcha(){
			var xhr = createXMLHttpRequest();
			xhr.open("POST","/weixin/registerLogin/getCaptcha.do",true);
			xhr.onreadystatechange = function() {
				if(xhr.readyState==4&&xhr.status==200) {
				}
			}
			xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
			xhr.send("phoneNumber="+phoneNumber.value);
		}

		function createXMLHttpRequest() {
			if(window.XMLHttpRequest) {
				return new XMLHttpRequest();
			} else if(window.ActiveXObject) {
				return new ActiveXObject("Microsoft.XMLHTTP");
			} else {
				alert("你使用的浏览器不支持XMLHttpRequest，请换一个浏览器再试！");
				return null;
			}
		}
		
		//显示弹窗
		function showAlert(zhezhao,show,zhe){
			var zhezhao = document.getElementById(zhezhao);
			var zhe = document.getElementById(zhe);
			var box = document.getElementById(show);

			zhezhao.style.display = "block";
			zhe.style.display = "block";
			box.style.display = "block";  
		}
		//隐藏弹窗
		function hideAlert(zhezhao,show,zhe){
			var zhezhao = document.getElementById(zhezhao);
			var zhe = document.getElementById(zhe);
			var box = document.getElementById(show);
			
			zhezhao.style.display = "none";
			zhe.style.display = "none";
			box.style.display = "none";  
			
		}

	var p_1 = document.getElementById("p_1");
	var img_1 = document.getElementById("img_1");
	var b1 = false;
	p_1.onclick = p_1Fun;
	function p_1Fun(){
		if(!b1){
			img_1.src="../img/icon-up1.png";
			b1=true;
			return false;
		}
		if(b1){
			img_1.src="../img/icon-down1.png";
			b1=false;
			return false;
		}
	}
	</script>
	
	<div style="display:none">
	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?77c5dde47c1fe4408e43b5dc5a5d3a0e";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
	</div>

</body></html>